<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Match Card Status Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- ================================ -->
    <!-- LANGUAGE SELECTOR -->
    <!-- ================================ -->
    <!-- Purpose: Allow users to switch between different languages for the interface -->
    <div class="content smaller" style="gap: 8px; align-items: center;">
        <label for="langSel" style="font-size: 0.9rem;">Language</label>
        <select id="langSel" aria-label="Select interface language">
            <option value="en">English</option>
            <option value="pt-BR">Português (Brasil)</option>
            <option value="es">Español</option>
        </select>
    </div>

    <!-- ================================ -->
    <!-- MAIN HEADER -->
    <!-- ================================ -->
    <!-- Purpose: Display the main title and subtitle of the application -->
    <h1>Royal Match<br>Card Status Tool<br><span class="subtitle"></span></h1>

    <!-- ================================ -->
    <!-- SAVE AND LOAD SECTION -->
    <!-- ================================ -->
    <!-- Purpose: Provide buttons for saving and loading card status data -->
    <fieldset class="divider add-space">
        <legend class="gray-color" id="saveLoadSection">Save & Load Card Status</legend>
    </fieldset>

    <div class="content smaller">
        <button id="saveOptionsBtn" aria-label="Save current card status selections to a file">Save</button>
        <button id="loadOptionsBtn" aria-label="Load previously saved card status from a file">Load</button>
        <input type="file" id="loadInput" style="display: none;" accept=".json" aria-label="Select JSON file to load">
    </div>

    <!-- ================================ -->
    <!-- POPUP COMPONENTS -->
    <!-- ================================ -->
    <!-- Purpose: Various popup dialogs for user interaction and feedback -->

    <!-- Warning popup for incomplete selections -->
    <div id="warningPopup" class="popup" style="display: none;" role="dialog" aria-labelledby="warningTitle"
        aria-describedby="warningMessage">
        <div class="popup-content">
            <span id="closeWarningPopup" class="close" role="button" tabindex="0"
                aria-label="Close warning popup">&times;</span>
            <fieldset class="divider">
                <legend class="orange-color" id="warningTitle">Whoops!</legend>
            </fieldset>
            <p id="warningMessage">Select at least one "needed" or "duplicate" option before saving</p>
            <div class="content">
                <button id="closeWarningBtn" aria-label="Close warning and continue">OK</button>
            </div>
        </div>
    </div>

    <!-- File name input popup for saving -->
    <div id="fileNamePopup" class="popup" style="display: none;" role="dialog" aria-labelledby="fileNamePopupTitle"
        aria-describedby="fileNameInputDescription">
        <div class="popup-content">
            <span id="closePopup" class="close" role="button" tabindex="0"
                aria-label="Close file name popup">&times;</span>
            <fieldset class="divider">
                <legend id="fileNamePopupTitle" class="green-color">Save Card Status</legend>
            </fieldset>
            <div class="input-container">
                <label for="fileNameInput" id="fileNameInputDescription">File Name:</label>
                <input id="fileNameInput" type="text" placeholder="Name Your File Here"
                    aria-describedby="fileNameInputDescription">
            </div>
            <div class="content">
                <button id="confirmSaveBtn" aria-label="Confirm save with entered file name">Save</button>
                <button id="cancelBtn" aria-label="Cancel file name input">Cancel</button>
            </div>
        </div>
    </div>

    <!-- File name validation popup for missing names -->
    <div id="fileNameValidationPopup" class="popup" style="display: none;" role="dialog"
        aria-labelledby="fileNameValidationTitle" aria-describedby="fileNameValidationMessage">
        <div class="popup-content">
            <span id="closeFileNameValidationPopup" class="close" role="button" tabindex="0"
                aria-label="Close validation popup">&times;</span>
            <fieldset class="divider">
                <legend class="orange-color" id="fileNameValidationTitle">Missing File Name</legend>
            </fieldset>
            <p id="fileNameValidationMessage">Please enter a file name to save your file</p>
            <div class="content">
                <button id="okFileNameValidationBtn" aria-label="Acknowledge validation message">OK</button>
            </div>
        </div>
    </div>

    <!-- Invalid file popup for file loading errors -->
    <div id="invalidFilePopup" class="popup" style="display: none;" role="dialog" aria-labelledby="invalidFileTitle"
        aria-describedby="invalidFileMessage">
        <div class="popup-content">
            <span id="closeInvalidFilePopup" class="close" role="button" tabindex="0"
                aria-label="Close invalid file popup">&times;</span>
            <fieldset class="divider">
                <legend class="orange-color" id="invalidFileTitle">Oops!</legend>
            </fieldset>
            <p id="invalidFileMessage">Please select a valid .json file!</p>
            <div class="content">
                <button id="closeInvalidFileBtn" aria-label="Close invalid file message">OK</button>
            </div>
        </div>
    </div>

    <!-- ================================ -->
    <!-- CARDS CONTAINER -->
    <!-- ================================ -->
    <!-- Purpose: Dynamic HTML container for displaying card information -->
    <!-- This section is populated by JavaScript based on user selections -->
    <div id="cards-container"></div>

    <!-- ================================ -->
    <!-- DECKS SELECTION -->
    <!-- ================================ -->
    <!-- Purpose: Allow users to choose which card decks to display -->
    <fieldset class="divider">
        <legend id="chooseDecksSection">Choose Decks:</legend>
    </fieldset>

    <!-- Dynamic HTML container for deck tabs -->
    <div id="decks-container" class="tabs">
    </div>

    <!-- ================================ -->
    <!-- TEXT GENERATION SECTION -->
    <!-- ================================ -->
    <!-- Purpose: Generate formatted text for Reddit posts and in-game chat -->
    <fieldset class="divider">
        <legend id="generateTextSection" class="gray-color">Generate Text</legend>
    </fieldset>

    <div class="content">
        <button id="show-reddit-format" class="reddit" aria-label="Show Reddit format for sharing card status">Show
            Reddit<br>Format</button>
        <button id="show-in-game-format" aria-label="Show in-game chat format for card status">Show
            In-Game<br>Format</button>
    </div>

    <!-- Format display containers -->
    <fieldset class="add-space">
        <!-- Reddit format display -->
        <div id="reddit-format-container" style="display:none;" role="region" aria-labelledby="redditFormatTitle"
            aria-describedby="redditFormatDescription">
            <legend class="orange-color" id="redditFormatTitle" data-translate="format.redditFormatTitle">Reddit Format
            </legend>
            <div id="reddit-format-description" style="display: block; color: gray;"
                data-translate="messages.redditUserMessage">Start selecting your card status...</div>
            <pre id="reddit-format" role="textbox" aria-label="Reddit format text for sharing"
                aria-describedby="redditFormatDescription"></pre>
        </div>

        <!-- In-game format display -->
        <div id="in-game-format-container" style="display:none;" role="region" aria-labelledby="inGameFormatTitle"
            aria-describedby="inGameFormatDescription">
            <legend class="blue-color" id="inGameFormatTitle" data-translate="format.inGameFormatTitle">In-Game Chat
                Format</legend>
            <div class="subtitle" style="color: #666; font-size: 0.9em; margin-bottom: 10px;">(1 paragraph,
                500-character limit)</div>
            <div id="in-game-format-description" style="display: block; color: gray;"
                data-translate="messages.inGameUserMessage">Start selecting your card
                status...<br>Splitting text after 500 characters</div>
            <pre id="in-game-format" role="textbox" aria-label="In-game chat format text"
                aria-describedby="inGameFormatDescription"></pre>
        </div>
    </fieldset>

    <!-- ================================ -->
    <!-- CREDITS AND ATTRIBUTION -->
    <!-- ================================ -->
    <!-- Purpose: Display credits and links to creators and communities -->
    <!-- Who lost a lot of sleep to make your life a bit easier xD -->
    <div class="credits credit-link">
        Royal Match Card Status Tool by <a href="https://www.reddit.com/user/Potential_Save"
            class="credit-link">u/Potential_Save</a>
        <br>Hobby collection co-created by: <a href="https://www.reddit.com/user/carloslaso"
            class="credit-link">u/carloslaso</a>
        <br>For General Discussion: <a href="https://www.reddit.com/r/RoyalMatch" class="credit-link">r/RoyalMatch</a>
        <br>Card Trading: <a href="https://www.reddit.com/r/RoyalMatchGame" class="credit-link">r/RoyalMatchGame</a>
        <!-- <br>cupofsketches@gmail.com -->
    </div>

    <!-- ================================ -->
    <!-- SCRIPT IMPORTS -->
    <!-- ================================ -->
    <!-- Purpose: Load all necessary JavaScript modules for the application -->

    <!-- Data and generator scripts -->
    <script type="module" src="cardsData.js"></script>
    <script type="module" src="htmlGenerator.js"></script>

    <!-- Utility scripts -->
    <script type="module" src="popupHandler.js"></script>
    <script type="module" src="fileOperations.js"></script>
    <script type="module" src="formatGenerators.js"></script>
    <script type="module" src="formatView.js"></script>

    <!-- Main application script -->
    <script type="module" src="main.js"></script>

</body>

</html>